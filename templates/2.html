<!DOCTYPE html>
<!--
	Theme Name: HASWELL
	Description: HTML/CSS 
	Author: ABCgomel 
	Designed & Coded by ABCgomel
-->
<html lang="ko">

<head>
    <title>부산올래?</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!-- CSS -->
    <!-- BOOTSTRAP -->
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <!-- GOOGLE FONT -->
    <link href='https://fonts.googleapis.com/css?family=Lato:300,400,700%7COpen+Sans:400,300,700' rel='stylesheet'
        type='text/css'>
    <!-- ICONS ELEGANT FONT & FONT AWESOME & LINEA ICONS -->
    <link rel="stylesheet" href="/static/css/icons-fonts.css">
    <!-- TEXT ROTATOR -->
    <link rel="stylesheet" href="/static/css/text-rotator.css">
    <!-- CSS THEME -->
    <link rel="stylesheet" href="/static/css/style.css">
    <!-- ANIMATE -->
    <link rel='stylesheet' href="/static/css/animate.min.css">
    <!-- FAVICONS -->
    <link rel="shortcut icon" href="/static/images/favicon.png">
    <!-- CSS end -->
    <!-- JS begin some js files in bottom of file-->
</head>

<body>
    <!-- LOADER -->
    <div id="loader-overflow">
        <div id="loader3"></div>
    </div>
    <div id="wrap" class="boxed ">
        <!-- HEADER -->
        <header id="nav" class="header header-1 black-header affix-on-mobile">
            <div class="header-wrapper">
                <div class="container-m-30 clearfix">
                    <div class="logo-row">
                        <!-- LOGO -->
                        <div class="logo-container-2">
                            <div class="logo-2">
                                <a href="/" class="clearfix">
                                    <img src="/static/images/logo.png" class="logo-img" alt="Logo">
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- PROGRESSBAR -->
        <div class="page-title-cont page-title-big custom-bg">
            <div class="relative container">
                <div class="container-pg row justify-content-md-center">
                    <ul class="progressbar ">
                        <li>감성 입력</li>
                        <li>태그 입력</li>
                        <li>결과 보기</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- FEATURES 1 -->
        <div class="page-section">
            <div class="fes1-cont text-center">
                <div class="font-26 font-black wow fadeIn sm-mt-40 sm-mb-40">
                    원하시는 태그를 선택해 보세요! 😊
                </div>
                <div class="row wow fadeIn  sm-mt-40 sm-mb-40">
                    {% set category = ['사진 명소', '자연/공원', '드라이브/산책', '역사/종교/문화 ', '체험', '축제'] %}
                    {% set subs = [['야경', '계절/꽃', '포토존'], ['바다', '산', '공원'],
                    ['드라이브', '산책'], ['역사', '종교', '문화'], ['액티비티', '아이동반', '이색체험'],
                    ['봄축제', '여름축제', '가을축제', '겨울축제']] %}
                    {% for idx1, (i, sub) in enumerate(zip(category, subs)) %}
                    <div class="col-md-4 text-right bd-r">
                        <span id="ctg{{idx1+1}}" class="btn-margin btn-square ctg font-32">{{ i }}</span>
                    </div>
                    <div class="col-md-8 text-left bd-l">
                        {% for idx2, j in enumerate(sub) %}
                        <button id="btn{{idx1+1}}{{idx2}}" class="button medium thin blue btn-margin ctg{{idx1+1}}">{{ j
                            }}</button>
                        {% endfor %}
                    </div>
                    <br>
                    {% endfor %}
                </div>
                <div class="wow fadeIn sm-mt-40 sm-mb-40">
                    <button id="nextBtn" class="button medium thin blue btn-margin ">결과 보기</button>
                    <br>
                    <a id="prevBtn" class="text-underline" href="javascript:window.history.go(-1);">뒤로 가기</a>
                </div>
            </div>
        </div>
    </div>
    </div>
    </div>
    .

    <!-- JS begin -->
    <!-- jQuery  -->
    <script src="/static/js/jquery-1.11.2.min.js"></script>

    <script type="text/javascript">
        // if (sessionStorage.getItem('num')) {
        //     var bg_num = sessionStorage.getItem('num');
        //     console.log(bg_num);
        // }

        //버튼(태그) 클릭 이벤트 처리
        const withEmoji = ['사진 명소📸', '자연/공원🌻', '드라이브/산책🚶', '역사/종교/문화 🏛', '체험🏄', '축제🎆'];
        for (const [idx, elem] of withEmoji.entries()) {
            let ctg = "ctg" + [idx + 1];

            $('.' + ctg).click(function () {
                // if ($(this).text() == '전체') {
                //     $(this).addClass('sub-all');
                //     $(this).siblings().removeClass('active');

                // } else {
                //     $(this).prevAll('.sub-all').removeClass('active');
                // }; 

                if ($(this).hasClass('active')) {
                    $(this).removeClass('active');
                    if (!$('.' + ctg).hasClass('active')) {
                        var innerText = elem.slice(0, -2);
                        $('#' + ctg).html(innerText);
                    }
                } else {
                    $(this).addClass('active');
                    $('#' + ctg).html(elem);
                };

            });
        };

        // 결과페이지 값 전달 json ver.
        // $("#nextBtn").on("click", function () {
        //     var tagData = {}
        //     $('.button.medium.thin').each(function (index) {
        //         if ($(this).hasClass('active')) {
        //             if ($(this).text() == '전체') {
        //                 $(this).removeClass('active');
        //                 $(this).siblings().each(function () {
        //                     $(this).addClass('active');
        //                 });
        //             } else {
        //                 let id = $(this).attr('id');
        //                 tagData[id] = 1;
        //             };
        //         } else {
        //             if (!($(this).text() == '전체') && !($(this).attr('id') == 'nextBtn')) {
        //                 let id = $(this).attr('id');
        //                 tagData[id] = 0;
        //             };
        //         };
        //         console.log(tagData);
        //     });

        //     $.ajax({
        //         type: 'POST',
        //         contentType: 'application/json',
        //         url: '/2',
        //         dataType: 'json',
        //         data: JSON.stringify(tagData),
        // success : function(result) {
        //   location.href = ''; 
        // },
        //     });
        // });

        // 결과페이지 값 전달 string ver.
        $("#nextBtn").on("click", function () {
            var tagData = ''
            $('.button.medium.thin').each(function (index) {
                if ($(this).hasClass('active')) {
                    if ($(this).text() == '전체') {
                        $(this).removeClass('active');
                        $(this).siblings().each(function () {
                            $(this).addClass('active');
                        });
                    } else {
                        tagData += 1;
                    };
                } else {
                    if (!($(this).text() == '전체') && !($(this).attr('id') == 'nextBtn')) {
                        tagData += 0;
                    };
                };
                sessionStorage.setItem("tag", tagData);
                location.href='/result'
            });
        });
    </script>

    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="/static/js/bootstrap.min.js"></script>
    <!-- MAGNIFIC POPUP -->
    <script src='/static/js/jquery.magnific-popup.min.js'></script>
    <!-- NAV -->
    <script src="/static/js/jquery.nav.js"></script>
    <!-- PORTFOLIO SCRIPTS -->
    <script src="/static/js/isotope.pkgd.min.js"></script>
    <script src="/static/js/imagesloaded.pkgd.min.js"></script>
    <script src="/static/js/masonry.pkgd.min.js"></script>
    <!-- COUNTER -->
    <script src="/static/js/jquery.countTo.js"></script>
    <!-- APPEAR -->
    <script src="/static/js/jquery.appear.js"></script>
    <!-- OWL CAROUSEL -->
    <script src="/static/js/owl.carousel.min.js"></script>
    <!-- PARALLAX -->
    <script src="/static/js/jquery.stellar.min.js"></script>
    <!-- TEXT ROTATOR -->
    <script src="/static/js/text-rotator.js"></script>
    <!-- MAIN SCRIPT -->
    <script src="/static/js/main.js"></script>
    <!-- JS end -->
</body>

</html>