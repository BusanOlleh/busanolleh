{% include 'progressbar.html' %}
<div class="page-section">
    <div class="fes1-cont text-center wow fadeIn">
        <div id="textBox" class="font-black wow fadeIn animated box-item" >
            ì¢‹ì•„í•˜ëŠ” ì—¬í–‰ ê°ì„±ì„ ê³¨ë¼ë³´ì„¸ìš”! ğŸ€
        </div>
        <div id="textBox2" class="font-black" style="margin: auto;">
            <span>ì´ë²ˆ ì—¬í–‰ì€...</span><br>
            <b id="changingTag" class="underline">                   </b><br><span> ì—¬í–‰ì´ê³  ì‹¶ë‹¤.</span>
        </div>
        <div id="tags" class=" box-item">
            <button class="button medium green thin btn-margin-1 btn-square">íë§ë˜ëŠ”</button>
            <button class="button medium red thin btn-margin-1 btn-square">ì—´ì •ì ì¸</button>
            <button class="button medium purple thin btn-margin-1 btn-square">ìœ ìµí•œ</button>
        </div>
        <div class="box-item">
            <button id="nextBtn" class="button medium thin blue btn-margin ">ë‹¤ìŒ</button>
            <a id="prevBtn" class="text-underline" href="javascript:window.history.go(-1);">ë’¤ë¡œ ê°€ê¸°</a>
        </div>
    </div>
</div>
<!-- JS begin -->
<script src="/static/js/jquery-1.11.2.min.js"></script>
<script type="text/javascript">
    // ì²˜ìŒ í™”ë©´ ë°°ê²½ì— ë§ëŠ” ì»¬ëŸ¬ ë°°ìƒ‰ìœ¼ë¡œ êµ¬í˜„í•˜ê³ ì í•¨
    // if (sessionStorage.getItem('num')) {
    //     let bg_num = sessionStorage.getItem('num');
    //     console.log(bg_num);
    // }
    $('li:eq(0)').addClass("firstChild");

    function resize() {
        if (window.innerWidth < window.innerHeight) {
            $('#tags').css({'flex-direction':'column'})
            $('#textBox2').css({'font-size':'1.5em'})
        } else {
            $('#tags').css({'flex-direction':'row'})
            $('#textBox2').css({'font-size':'1.8em'})
        }
    }
    resize();
    $(window).resize(function () { resize(); });

    // ë¬¸êµ¬ ë³€ê²½ ê´€ë ¨ ì œì´ì¿¼ë¦¬
    let existingText = $('#changingTag').text();
    let chosenColor = '#37a2d6';
    let existingColor = '#37a2d6';
    let colorClass = 'blue';

    $(".btn-square").on({ //ì´ë²¤íŠ¸ ë°”ì¸ë”©
        mouseenter: function () {
            let innerText = $(this).text();
            if (innerText == 'íë§ë˜ëŠ”'){
                chosenColor = '#5fc94f';
                colorClass = 'green';
            }else if(innerText == 'ì—´ì •ì ì¸'){
                chosenColor = '#e35f69';
                colorClass = 'red';
            }else if(innerText == 'ìœ ìµí•œ'){
                chosenColor = '#a660db';
                colorClass = 'purple';
            }
            $('#changingTag').html('   ' + innerText + '   ');
            if (innerText == 'íë§ë˜ëŠ”'){
                $('.underline').css({'border-color':'#5fc94f'});
            }else if(innerText == 'ì—´ì •ì ì¸'){
                $('.underline').css({'border-color':'#e35f69'});
            }else if(innerText == 'ìœ ìµí•œ'){
                $('.underline').css({'border-color':'#a660db'});
            }
            $('.underline').css({'border-color':chosenColor});
        },
        mouseleave: function () {
            $('#changingTag').html(existingText);
            $('.underline').css({'border-color':existingColor});
        },
        click: function () {
            let innerText = $(this).text();
            $('#changingTag').html('   ' + innerText + '   ');
            existingText = '   ' + innerText + '   ';

            if (innerText == 'íë§ë˜ëŠ”'){
                chosenColor = '#5fc94f';
                colorClass = 'green';
            }else if(innerText == 'ì—´ì •ì ì¸'){
                chosenColor = '#e35f69';
                colorClass = 'red';
            }else if(innerText == 'ìœ ìµí•œ'){
                chosenColor = '#a660db';
                colorClass = 'purple';
            }
            
            if ($(this).hasClass('active')) {
                $(this).removeClass('active');
                existingColor = '#37a2d6';
                existingText = '                   ';
            } else {
                $(this).addClass('active');
                $(this).addClass(chosenColor);
                $(this).siblings().removeClass('active');
                existingColor = chosenColor;
            };  
            $('.underline').css({'border-color':existingColor});
        }
    })

    // ë‹¤ìŒ ë²„íŠ¼ 
    $("#nextBtn").on("click", function () {
        let sentiment = $('#changingTag').text().trim();
        if (sentiment){
            sessionStorage.setItem("sentiment", sentiment);
            location.href = '/2';
        } else {
            $('#textBox').html('ê°ì„±ì„ ê³¨ë¼ì•¼ ë„˜ì–´ê°ˆ ìˆ˜ ìˆì–´ìš”ğŸ˜¥')
        }
    })
</script>